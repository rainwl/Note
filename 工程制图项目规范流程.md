# 工程制图项目规范流程
## 1.教材习题集模型梳理
- 对照模型Excel列表，在教材中查看模型是否有重复，过于复杂，是否有相关图的问题。
- 将列表所有模型对应教材内三视图进行 500 X 500 像素截图。（可使用haFSCapture）。
- 建立文件夹“教材截图”和“习题集截图”，将截图保存其中。
- 截图命名规范，如“第六章图6.17”，命名为“6_17”，使用下划线进行分隔。
## 2.规范建模
1. 粗模对照三视图可以采用 Solidworks 2016 或者 3dsMax 2014 软件进行建模（版本规范）。
2. 粗模建模完毕需要导入3dsmax2014进行模型处理。
3. 模型处理规范：
- Solidworks保证2016版本，3dsmax保证2014版本，不允许使用其他版本。
- Solidworks建的零件图导入3dsmax后，务必删除所有三维坐标线。
- 3dsmax内处理模型，修改器务必使用“编辑多边形”，不允许使用“编辑网格”。
- 3dsmax内模型，务必将模型所有部分坐标轴对齐到对象中心。
- 3dsmax内模型，模型的正视图，左视图，俯视图 和教材内三视图方位要对准。
- 3dsmax内模型，使用“背面消隐”进行法线检查，不能出现漏面，多面等面相关错误。
- 3dsmax对上色面进行分离，要符合一致原则，使用“编辑多边形-面-分离”进行分离操作。
- 3dsmax内模型，使用材质球上色，上色需符合配色方案，事先沟通监工。
- 3dsmax上色后，通过“编辑多边形-附加列表”将模型归一，然后检查坐标和中心是否归零。
- 3dsmax内最终模型，保证模型整体大小接近但不超过 1000mm * 1000mm * 1000mm。
- 3dsmax内最终模型，检查对象对齐，保证坐标轴对齐到中心，检查模型坐标位置XYZ均为0。
- 3dsmax内处理完，各视图在模型非选中状态下使用“Z”快捷键在各试图窗口最大化显示，检查是否有未删除干净的三维线或者其他杂点，如有，删除。
- 3dsmax完成所有操作后，导出FBX至相应文件夹。
- FBX文件命名规范，如“习题册第八章第25页第5题”，命名为“8_25_5”，保证与截图命名相同。
4. 建立文件夹“教材模型”和“习题集模型”，将导出的FBX格式模型文件保存其中。

## 3.Unity内打包AssetBundle资源
1. 保证Unity版本5.6.5f1，打开Test工程文件。
2. 将整理完的模型文件夹拖入“Models”文件夹，Inspector面板检查模型上色是否正确，是否有漏面等情况。
3. Asset内新建文件夹“assetbundle_jc”文件夹，如有该名称旧文件夹，可删除。
4. 将教材模型拖入hierarchy，检查模型坐标轴是否在0，0，0，是否在模型中心，如存在问题，需返工修改。
5. 检查scene内模型是否在1*1*1的cube内，保证大小，如有不符合，缩放至该大小。
6. 将hierarchy内处理完模型依此导入刚刚建立的“assetbundle_jc”文件夹，5.6.5f1版本不支持全选拖入，只能一个个拖入。
7. 在explorer内打开工程文件夹，和Assets同级内，是否有旧的AssetBundles文件，如有，删除。
8. 在非C盘的盘符，如D盘，新建output.txt，具体路径检查“CreateAssetBundles”脚本中所写路径。
9. 选中“assetbundle_jc”文件夹内的所有模型prefab，在状态栏点击“AssetBundle”-“BuildPrefab”，进行动态资源整理，速度视CPU性能而定，可在explorer中根据“AssetBundles”文件夹生成查看进度。
10. 完成后，将“AssetBundles”文件夹和output.txt文件复制进一个新建的例如叫“Assetbundles_jc”的文件夹。
11. 完成第10步后，删除Test工程文件中的“AssetBundles”文件夹，然后在Unity中进行对习题集的操作，操作同以上描述，命名略有区别。
12. 每次打包assetbundle，output.txt会刷新（清空上次内容），注意一定要保存。

## 4.Asset Bundles资源上传至服务器
1. 上传使用MobaXterm
2. 如果第一次使用，新建连接，session- SSH，填入39.104.135.55服务器ip,名字打勾，root,端口1401。
3. 成功连接后，地址上的/root/改为/data/，/data/www/default/unity/mes/AssetBundles
分别有android，iOS和Windows，都要进行编辑
4. 以android为例，新建“xjnyjc”文件夹，将“Assetbundles_jc”文件夹中android文件夹内容全选拖进来，iOS，Windows同上操作
5. 注意不要随意备份和删除，谨慎！
## 5.更新模型数据库
1. 数据库使用Navicat，主机39.104.135.55，端口3306，用户名root
2. 选择mes-表-models。
3. 在桌面新建Excel表“模型与图片对应”，如图建立表格，将output文件导入进对应位置，后面的值使用公式进行计算。
4. 将page_id ~ page_id_2部分表格复制，粘贴进一个新建的txt文件
5. 数据库中导入，将txt文件导入，完成数据库更新。